<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì£¼ê°„ ê³¼ì œ í†µí•© ì½”ë“œ ìƒì„±ê¸°</title>
    <style>
        :root { --p: #6c5ce7; }
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; line-height: 1.6; }
        .gen-container { max-width: 800px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: var(--p); border-bottom: 2px solid var(--p); padding-bottom: 10px; margin-top: 0; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #333; font-size: 0.95rem; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 14px; }
        textarea { height: 60px; resize: vertical; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        button { width: 100%; padding: 18px; background: var(--p); color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.2s; }
        button:hover { background: #5649c1; }
        #codeOutput { width: 100%; height: 250px; margin-top: 20px; display: none; font-family: monospace; background: #2d3436; color: #dfe6e9; padding: 15px; border-radius: 10px; }
        .info { font-size: 0.8rem; color: #666; margin-top: 2px; }
    </style>
</head>
<body>

<div class="gen-container">
    <h1>ğŸ“˜ í†µí•© ê³¼ì œ ìƒì„±ê¸°</h1>

    <div class="grid">
        <div class="input-group">
            <label>ê³¼ì œ ì œëª©</label>
            <input type="text" id="title" placeholder="ì˜ˆ: 2ì›” 2íšŒì°¨ ì£¼ê°„ ê³¼ì œ">
        </div>
        <div class="input-group">
            <label>ê³¼ì œ ê³ ìœ  ID (ì˜ë¬¸/ìˆ«ì)</label>
            <input type="text" id="hwID" placeholder="ì˜ˆ: HW_0202_TOTAL">
        </div>
    </div>

    <div class="grid">
        <div class="input-group">
            <label>ì‹œì‘ì¼</label>
            <input type="date" id="startDay">
        </div>
        <div class="input-group">
            <label>ë§ˆê°ì¼</label>
            <input type="date" id="endDay">
        </div>
    </div>

    <div class="grid">
        <div class="input-group">
            <label>ğŸ“˜ ë…ì„œ ì •ë‹µ (ìˆ«ìë§Œ)</label>
            <textarea id="ansR" placeholder="ì˜ˆ: 414434..."></textarea>
        </div>
        <div class="input-group">
            <label>ğŸ“• ë¬¸í•™ ì •ë‹µ (ìˆ«ìë§Œ)</label>
            <textarea id="ansL" placeholder="ì˜ˆ: 134234..."></textarea>
        </div>
    </div>

    <div class="input-group">
        <label>ë…ì„œ í™œì„±í™” ë¬¸í•­ ë²ˆí˜¸</label>
        <input type="text" id="actR" placeholder="ì˜ˆ: 5,6,7,8,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30">
        <div class="info">ì§€ì •í•œ ë²ˆí˜¸ ì™¸ì—ëŠ” íšŒìƒ‰ìœ¼ë¡œ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.</div>
    </div>

    <div class="grid">
        <div class="input-group">
            <label>ë…ì„œ ë¬¸ì œì§€ ë§í¬</label>
            <input type="text" id="linkR" placeholder="https://...">
        </div>
        <div class="input-group">
            <label>ë¬¸í•™ ë¬¸ì œì§€ ë§í¬</label>
            <input type="text" id="linkL" placeholder="https://...">
        </div>
    </div>

    <div class="input-group">
        <label>í†µí•© í•´ì„¤ì§€ ë§í¬</label>
        <input type="text" id="linkAns" placeholder="https://...">
    </div>

    <button onclick="generate()">ğŸš€ í†µí•© ê³¼ì œ ì½”ë“œ ìƒì„± ë° ë³µì‚¬</button>

    <textarea id="codeOutput" readonly></textarea>
    <p id="copyMsg" style="text-align:center; color: var(--p); font-weight:bold; display:none; margin-top:10px;">âœ… ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! .html íŒŒì¼ë¡œ ì €ì¥í•˜ì„¸ìš”.</p>
</div>

<script>
    function generate() {
        const t = document.getElementById('title').value || "ì£¼ê°„ ê³¼ì œ";
        const id = document.getElementById('hwID').value || "HW_TEMP";
        const sd = document.getElementById('startDay').value || "2026-02-05";
        const ed = document.getElementById('endDay').value || "2026-02-10";
        const ansR = document.getElementById('ansR').value.trim();
        const ansL = document.getElementById('ansL').value.trim();
        const actR = document.getElementById('actR').value.trim() || "5,6,7,8,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30";
        const linkR = document.getElementById('linkR').value;
        const linkL = document.getElementById('linkL').value;
        const linkAns = document.getElementById('linkAns').value;

        const template = `<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>${t}</title>
<meta property="og:title" content="ê¹€í˜„ì„ êµ­ì–´ - ${t}">
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"></script>
<style>
:root{--p:#6c5ce7;--bg:#f8f9fc}body{font-family:-apple-system,sans-serif;background:var(--bg);padding:15px;margin:0}.container{max-width:600px;margin:0 auto;background:#fff;padding:25px;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,0.1)}.notice-box{background:#fff3e0;padding:15px;border-radius:12px;margin-bottom:20px;font-size:0.9rem;color:#5d4037;line-height:1.6}.q-card{background:#fff;border:1.5px solid #eee;border-radius:15px;padding:20px;margin-bottom:12px}.options{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;position:relative}.opt-input{position:absolute;width:0;height:0;opacity:0;pointer-events:none}.opt-label{height:45px;border:1.5px solid #eee;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;cursor:pointer;transition:0.2s;position:relative;z-index:1}.opt-input:checked+.opt-label{background:var(--p);color:#fff;box-shadow:0 5px 12px rgba(108,92,231,0.3)}.opt-input:disabled+.opt-label{background:#eee;color:#bbb;cursor:not-allowed;border:none}#timer{font-weight:bold;color:#ff6b6b;text-align:right;font-size:1.0rem;margin-bottom:10px}#overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:99;align-items:center;justify-content:center}input,select{padding:12px;border:1px solid #ddd;border-radius:10px;width:100%;box-sizing:border-box;outline:none}.type-selector{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:20px}.type-btn{padding:15px;border:2px solid var(--p);border-radius:12px;background:#fff;color:var(--p);font-weight:bold;cursor:pointer}.type-btn.active{background:var(--p);color:#fff}
</style>
<script>
window.onload=function(){initPage();};
</script>
</head><body><div id="overlay"></div><div class="container"><h2 style="text-align:center">${t}</h2>
<div class="type-selector"><button id="btnR" class="type-btn active" onclick="changeT('R')">ğŸ“˜ ë…ì„œ</button><button id="btnL" class="type-btn" onclick="changeT('L')">ğŸ“• ë¬¸í•™</button></div>
<div id="timer">â± <span id="timeText">ì…ë ¥ ê°€ëŠ¥</span></div>
<div id="areaR"><div class="notice-box"><b>[ë…ì„œ ê³µì§€]</b> ì§€ì • ì§€ë¬¸ë§Œ í’€ ê²ƒ.<br>ğŸ“… ê¸°í•œ: ${sd} ~ ${ed}</div><div id="lMsgR" style="display:none;color:#d63031;font-weight:bold;text-align:center;margin-bottom:20px;padding:15px;background:#fab1a0;border-radius:12px"></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><input type="text" id="cNR" placeholder="í•™ì›ëª…"><input type="text" id="sNR" placeholder="í•™ìƒ ì´ë¦„" oninput="chkL('R')"></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><select id="sDR" onchange="chkL('R')"><option value="">ì œì¶œì¼ ì„ íƒ</option></select><a href="${linkR}" target="_blank" style="display:flex;align-items:center;justify-content:center;background:#eee;color:#333;text-decoration:none;border-radius:10px;font-weight:bold;font-size:0.8rem">ğŸ“„ ë…ì„œ ë¬¸ì œì§€</a></div><div id="qCR"></div><button id="subR" onclick="sub('R')" style="width:100%;padding:20px;background:#ff6b6b;color:white;border:none;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸ“ ë…ì„œ ì œì¶œ</button><button id="kakR" onclick="sh('R')" style="display:none;width:100%;background:#fee500;color:#3c1e1e;border:none;padding:20px;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸŸ¡ ì¹´í†¡ í™•ì¸</button><div id="resR" style="display:none;margin-top:20px"></div></div>
<div id="areaL" style="display:none"><div class="notice-box"><b>[ë¬¸í•™ ê³µì§€]</b> ì „ ë¬¸í•­ì„ ë‹¤ í’€ì–´ì•¼ í•©ë‹ˆë‹¤.<br>ğŸ“… ê¸°í•œ: ${sd} ~ ${ed}</div><div id="lMsgL" style="display:none;color:#d63031;font-weight:bold;text-align:center;margin-bottom:20px;padding:15px;background:#fab1a0;border-radius:12px"></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><input type="text" id="cNL" placeholder="í•™ì›ëª…"><input type="text" id="sNL" placeholder="í•™ìƒ ì´ë¦„" oninput="chkL('L')"></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><select id="sDL" onchange="chkL('L')"><option value="">ì œì¶œì¼ ì„ íƒ</option></select><a href="${linkL}" target="_blank" style="display:flex;align-items:center;justify-content:center;background:#eee;color:#333;text-decoration:none;border-radius:10px;font-weight:bold;font-size:0.8rem">ğŸ“„ ë¬¸í•™ ë¬¸ì œì§€</a></div><div id="qCL"></div><button id="subL" onclick="sub('L')" style="width:100%;padding:20px;background:#6c5ce7;color:white;border:none;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸ“ ë¬¸í•™ ì œì¶œ</button><button id="kakL" onclick="sh('L')" style="display:none;width:100%;background:#fee500;color:#3c1e1e;border:none;padding:20px;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸŸ¡ ì¹´í†¡ í™•ì¸</button><div id="resL" style="display:none;margin-top:20px"></div></div>
</div><script>
let cur='R',tl,iv=null;
const cfg={R:{ans:[0,..."${ansR}".split("").map(Number)],act:[${actR}],total:${ansR.length},id:"${id}_R"},L:{ans:[0,..."${ansL}".split("").map(Number)],act:Array.from({length:${ansL.length}},(_,i)=>i+1),total:${ansL.length},id:"${id}_L"}};
const sd="${sd}",ed="${ed}",GAS="https://script.google.com/macros/s/AKfycbzkA0CC8GAhcdAP16fzq32ufyTIYolZ8TyeuSjW5FAsG0M3vPcYQOIaSKIOOYKYgtDc/exec";
try{Kakao.init("f81d5eae0eaaf6fa2d0bdccbe6916001");}catch(e){}
function changeT(t){cur=t;document.getElementById('areaR').style.display=t==='R'?'block':'none';document.getElementById('areaL').style.display=t==='L'?'block':'none';document.getElementById('btnR').className='type-btn'+(t==='R'?' active':'');document.getElementById('btnL').className='type-btn'+(t==='L'?' active':'');}
function initPage(){['R','L'].forEach(t=>{const sel=document.getElementById("sD"+t);for(let d=new Date(sd);d<=new Date(ed);d.setDate(d.getDate()+1)){let s=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();let o=document.createElement("option");o.value=s;o.innerText=s;sel.appendChild(o);}let h="";for(let n=1;n<=cfg[t].total;n++){const dis=cfg[t].act.includes(n)?"":"disabled";h+="<div class='q-card'><b>"+n+"ë²ˆ</b><div class='options'>";for(let j=1;j<=5;j++){h+="<input type='radio' name='q"+t+n+"' id='q"+t+n+"_"+j+"' value='"+j+"' class='opt-input' "+dis+"><label for='q"+t+n+"_"+j+"' class='opt-label'>"+j+"</label>";}h+="</div></div>";}document.getElementById("qC"+t).innerHTML=h;});chkD();}
function chkD(){const n=new Date();n.setHours(0,0,0,0);const isO=n<new Date(sd)||n>new Date(ed).setHours(23,59,59);['R','L'].forEach(t=>{document.getElementById("sub"+t).style.display=isO?'none':'block';if(isO)document.getElementById("lMsg"+t).style.display='block';});}
function chkL(t){const sN=document.getElementById("sN"+t).value.trim();if(sN.length<2)return;const key="att_"+sN+"_"+cfg[t].id;if(localStorage.getItem("perf_"+sN+"_"+cfg[t].id))showF(t,"ë°±ì !");}
function sub(t){const cN=document.getElementById("cN"+t).value,sN=document.getElementById("sN"+t).value.trim(),sD=document.getElementById("sD"+t).value;if(!cN||!sN||!sD){alert("ì •ë³´ ì…ë ¥!");return;}let w=0,d=[];cfg[t].act.forEach(n=>{let s=document.querySelector("input[name='q"+t+n+"']:checked");if((s?parseInt(s.value):0)!==cfg[t].ans[n]){w++;d.push(n);}});const key="att_"+sN+"_"+cfg[t].id,att=parseInt(localStorage.getItem(key)||0)+1;localStorage.setItem(key,att);if(w===0)localStorage.setItem("perf_"+sN+"_"+cfg[t].id,"true");document.getElementById("sub"+t).style.display="none";document.getElementById("kak"+t).style.display="block";fetch(GAS,{method:"POST",mode:"no-cors",body:JSON.stringify({exam:t==='R'?'ë…ì„œ':'ë¬¸í•™',name:sN,class:cN,attempt:att,wrongCount:w,wrongList:d.join(",")})});alert("ì¹´í†¡ ì „ì†¡ í›„ ì™„ë£Œ í´ë¦­!");}
function sh(t){Kakao.Share.sendDefault({objectType:"text",text:"["+(t==='R'?'ë…ì„œ':'ë¬¸í•™')+"] ì œì¶œ ì™„ë£Œ",link:{mobileWebUrl:window.location.href,webUrl:window.location.href}});setTimeout(()=>{document.getElementById("overlay").style.display="flex";document.getElementById("overlay").innerHTML="<div style='background:white;padding:30px;border-radius:20px;text-align:center'><p>ì „ì†¡ ì™„ë£Œ?</p><button onclick='dn(\""+t+"\")' style='padding:12px;background:#fee500;border:none;border-radius:10px;font-weight:bold'>ë„¤</button></div>";},1500);}
function dn(t){document.getElementById("overlay").style.display="none";document.getElementById("kak"+t).style.display="none";document.getElementById("sub"+t).style.display="block";stT(t);}
function stT(t){tl=180;const btn=document.getElementById("sub"+t);btn.disabled=true;iv=setInterval(()=>{if(tl<=0){clearInterval(iv);btn.disabled=false;document.getElementById("timeText").innerText="ì…ë ¥ ê°€ëŠ¥";return;}tl--;document.getElementById("timeText").innerText=Math.floor(tl/60)+"ë¶„ "+(tl%60<10?"0"+tl%60:tl%60)+"ì´ˆ ë‚¨ìŒ";},1000);}
function showF(t,m){document.getElementById("res"+t).style.display="block";document.getElementById("res"+t).innerHTML="<div style='padding:20px;background:#eeebff;border-radius:15px;text-align:center'><h3>"+m+"</h3><a href='${linkAns}' target='_blank'>ğŸ“˜ í•´ì„¤ì§€</a></div>";document.getElementById("sub"+t).style.display="none";}
<\/script></body></html>`;

        const output = document.getElementById('codeOutput');
        output.value = template;
        output.style.display = 'block';
        output.select();
        document.execCommand('copy');
        document.getElementById('copyMsg').style.display = 'block';
    }
</script>
</body>
</html>