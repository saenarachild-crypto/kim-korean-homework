<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>1ì›” 2ì£¼ì°¨ ë…ì„œ í…ŒìŠ¤íŠ¸</title>
    <style>
        body{font-family:-apple-system,sans-serif;background:#f0f2f5;padding:15px;margin:0}
        .container{max-width:600px;margin:0 auto;background:#fff;padding:25px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
        .title { text-align: center; color: #333; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #666; font-size: 0.9rem; margin-bottom: 20px; }
        .q-list { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 20px; }
        .q-item { text-align: center; }
        .q-num { font-size: 0.8rem; color: #888; margin-bottom: 3px; display: block; }
        .q-input { width: 100%; padding: 10px; text-align: center; border: 1px solid #ccc; border-radius: 5px; font-size: 1.1rem; font-weight: bold; box-sizing: border-box; }
        .btn-submit { display: block; width: 100%; padding: 15px; background: #2c3e50; color: #fff; border: none; border-radius: 10px; font-weight: bold; font-size: 1.2rem; cursor: pointer; }
        .btn-submit:disabled { background: #cfd8dc; color: #90a4ae; cursor: not-allowed; }
        .result-box { display: none; margin-top: 25px; padding: 20px; border-radius: 10px; text-align: center; }
        .pass { background: #e8f5e9; border: 2px solid #4caf50; color: #2e7d32; }
        .fail { background: #ffebee; border: 2px solid #ef5350; color: #c62828; }
        .timer-msg { text-align: center; color: #d32f2f; font-weight: bold; margin-top: 10px; display: none; }
    </style>
</head>
<body>
<div class="container">
    <h2 class="title">1ì›” 2ì£¼ì°¨ ë…ì„œ í…ŒìŠ¤íŠ¸</h2>
    <p class="subtitle">ì´ 15ë¬¸í•­ / 2ê°œê¹Œì§€ í†µê³¼</p>
    <div style="margin-bottom:15px"><label style="font-weight:bold">ì´ë¦„</label><input type="text" id="studentName" style="width:100%;padding:10px;margin-top:5px;border:1px solid #ccc;border-radius:5px"></div>
    <div id="questionContainer" class="q-list"></div>
    <button id="submitBtn" class="btn-submit" onclick="checkAnswers()">ì±„ì í•˜ê¸°</button>
    <div id="timerMsg" class="timer-msg"></div>
    <div id="resultArea" class="result-box"></div>
</div>
<script>
    const correctAnswers = [1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5];
    const passCriteria = 2;
    const COOLDOWN_MINUTES = 5;
    const MAX_ATTEMPTS = 5;
    const STORAGE_KEY = "daily_1768041973633";
    let attempt = 0; const totalQ = correctAnswers.length;

    window.onload = function() {
        let html = "";
        for(let i=1; i<=totalQ; i++) html += '<div class="q-item"><span class="q-num">'+i+'ë²ˆ</span><input type="tel" class="q-input" id="a'+i+'" maxlength="1"></div>';
        document.getElementById("questionContainer").innerHTML = html;
        loadStatus();
    };

    function loadStatus() {
        const saved = localStorage.getItem(STORAGE_KEY);
        if(saved) {
            const data = JSON.parse(saved);
            attempt = data.attempt || 0;
            if(data.name) document.getElementById("studentName").value = data.name;
            if(MAX_ATTEMPTS > 0 && attempt >= MAX_ATTEMPTS) { disableForever(); return; }
            if(COOLDOWN_MINUTES > 0 && data.lastSubmitTime) {
                const passed = (new Date().getTime() - data.lastSubmitTime)/1000/60;
                if(passed < COOLDOWN_MINUTES) lockSubmit(COOLDOWN_MINUTES - passed);
            }
        }
    }

    function checkAnswers() {
        const name = document.getElementById("studentName").value;
        if(!name) return alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        attempt++;
        let wrongCount = 0; let wrongList = [];
        for(let i=0; i<totalQ; i++) {
            const userVal = document.getElementById('a'+(i+1)).value;
            if(!userVal || parseInt(userVal) !== correctAnswers[i]) {
                wrongCount++; wrongList.push((i+1)+"ë²ˆ");
                document.getElementById('a'+(i+1)).style.backgroundColor = "#ffebee";
            } else { document.getElementById('a'+(i+1)).style.backgroundColor = "#fff"; }
        }
        localStorage.setItem(STORAGE_KEY, JSON.stringify({ name: name, attempt: attempt, lastSubmitTime: new Date().getTime() }));
        const res = document.getElementById("resultArea"); res.style.display = "block";
        if(wrongCount <= passCriteria) {
            res.className = "result-box pass";
            res.innerHTML = "<h2>ğŸ‰ í†µê³¼!</h2><p><b>"+name+"</b> í•™ìƒ<br>í•˜ì›í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤!</p>";
            document.getElementById("submitBtn").style.display = "none";
        } else {
            let msg = "<div style='font-weight:bold;font-size:1.2rem'>ğŸ˜± "+wrongCount+"ê°œ í‹€ë ¸ì–´ìš”!</div><div style='margin-top:10px'><b>ì˜¤ë‹µ:</b><br>"+wrongList.join(", ")+"</div>";
            if(MAX_ATTEMPTS > 0) {
                if(MAX_ATTEMPTS - attempt <= 0) { disableForever(); msg += "<br><b style='color:red'>ğŸš« ê¸°íšŒ ì†Œì§„! ì„ ìƒë‹˜ í˜¸ì¶œ.</b>"; }
                else { msg += "<br>(ë‚¨ì€ ê¸°íšŒ: "+(MAX_ATTEMPTS-attempt)+"ë²ˆ)"; if(COOLDOWN_MINUTES > 0) lockSubmit(COOLDOWN_MINUTES); }
            } else if(COOLDOWN_MINUTES > 0) lockSubmit(COOLDOWN_MINUTES);
            res.className = "result-box fail"; res.innerHTML = msg;
        }
    }
    function lockSubmit(min) {
        const btn = document.getElementById("submitBtn"); const msg = document.getElementById("timerMsg");
        btn.disabled = true; msg.style.display = "block";
        let sec = Math.ceil(min * 60);
        const timer = setInterval(() => {
            sec--;
            if(sec <= 0) { clearInterval(timer); btn.disabled = false; btn.innerText = "ì±„ì í•˜ê¸°"; msg.style.display = "none"; }
            else { btn.innerText = "â³ ëŒ€ê¸° ("+Math.ceil(sec)+"ì´ˆ)"; msg.innerText = "â³ "+Math.ceil(sec)+"ì´ˆ í›„ ì¬ë„ì „ ê°€ëŠ¥"; }
        }, 1000);
    }
    function disableForever() {
        document.getElementById("submitBtn").disabled = true;
        document.getElementById("submitBtn").innerText = "ğŸš« ì œì¶œ ë¶ˆê°€";
    }
</script>
</body>
</html>