<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>2ì›” 2íšŒì°¨ ì£¼ê°„ ê³¼ì œ</title>
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"></script>
<style>
:root{--p:#6c5ce7;--bg:#f8f9fc}body{font-family:-apple-system,sans-serif;background:var(--bg);padding:15px;margin:0}.container{max-width:600px;margin:0 auto;background:#fff;padding:25px;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,0.1)}.notice-box{background:#fff3e0;padding:15px;border-radius:12px;margin-bottom:20px;font-size:0.9rem;color:#5d4037;line-height:1.6}.q-card{background:#fff;border:1.5px solid #eee;border-radius:15px;padding:20px;margin-bottom:12px}.options{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;position:relative}.opt-input{position:absolute;width:0;height:0;opacity:0;pointer-events:none}.opt-label{height:45px;border:1.5px solid #eee;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;cursor:pointer;transition:0.2s;position:relative;z-index:1}.opt-input:checked+.opt-label{background:var(--p);color:#fff;box-shadow:0 5px 12px rgba(108,92,231,0.3)}.opt-input:disabled+.opt-label{background:#eee;color:#bbb;cursor:not-allowed;border:none}#timer{font-weight:bold;color:#ff6b6b;text-align:right;font-size:1.0rem;margin-bottom:10px}#overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:99;align-items:center;justify-content:center}input,select{padding:12px;border:1px solid #ddd;border-radius:10px;width:100%;box-sizing:border-box;outline:none}
/* ì„ íƒ íƒ­ ìŠ¤íƒ€ì¼ */
.type-selector{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:20px}.type-btn{padding:15px;border:2px solid var(--p);border-radius:12px;background:#fff;color:var(--p);font-weight:bold;cursor:pointer;transition:0.3s}.type-btn.active{background:var(--p);color:#fff}
</style>
</head>
<body>
<div id="overlay"></div>
<div class="container">
    <h2 style="text-align:center">2ì›” 2íšŒì°¨ ì£¼ê°„ ê³¼ì œ</h2>
    
    <div class="type-selector">
        <button id="btn_reading" class="type-btn active" onclick="changeType('reading')">ğŸ“˜ ë…ì„œ</button>
        <button id="btn_literature" class="type-btn" onclick="changeType('literature')">ğŸ“• ë¬¸í•™</button>
    </div>

    <div id="timer">â± <span id="timeText">--ë¶„ --ì´ˆ ë‚¨ìŒ</span></div>

    <div id="area_reading">
        <div class="notice-box"><b>[ê³µì§€]</b> ì§€ì • ì§€ë¬¸ë§Œ í’€ ê²ƒ. <br>í—ˆë¸”ì˜ ë²•ì¹™ê³¼ ìš°ì£¼ ë‚˜ì´(5~8)<br>ì¢… ë‹¤ì–‘ì„± ì§€í‘œì˜ ë‘ ìœ í˜•(13~16)<br>í”¼ì…” íš¨ê³¼ì™€ ì¡°ì„¸ ì™œê³¡ í˜„ìƒ(17~20)<br>ì ìƒ‰í¸ì´(21~24)<br>ë¹ˆê³¤ ì§€ìˆ˜ë¥¼ í†µí•œ ë¹ˆê³¤ì˜ ì¸¡ì •ê³¼ ë¹ˆê³¤ ì§€ìˆ˜ì˜ ì •ì±…ì  í™œìš©(25~30)<br>ğŸ“… ê¸°í•œ: 2026-02-05 ~ 2026-02-10<br>ğŸ”„ ì´ 3íšŒ ë„ì „ ê°€ëŠ¥</div>
        <div id="limitMsg_R" class="limit-msg-style" style="display:none;color:#d63031;font-weight:bold;text-align:center;margin-bottom:20px;padding:15px;background:#fab1a0;border-radius:12px"></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><input type="text" id="cN_R" placeholder="í•™ì›ëª…"> <input type="text" id="sN_R" placeholder="í•™ìƒ ì´ë¦„" oninput="checkLimitR()"></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><select id="sD_R" onchange="checkLimitR()"><option value="">ì œì¶œì¼ ì„ íƒ</option></select><a href="https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQA0rZBWBuzuRJ_bZzMddyaMActX3fxV9pevd4DJedcF_fQ?e=daSLlG" target="_blank" style="display:flex;align-items:center;justify-content:center;background:#eee;color:#333;text-decoration:none;border-radius:10px;font-weight:bold;font-size:0.8rem">ğŸ“„ ë…ì„œ ë¬¸ì œì§€</a></div>
        <div id="qC_R"></div>
        <button id="subBtn_R" onclick="submitR()" style="width:100%;padding:20px;background:#ff6b6b;color:white;border:none;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸ“ ë…ì„œ ë‹µì•ˆ ì œì¶œ</button>
        <button id="kakaoBtn_R" onclick="shareR()" style="display:none;width:100%;background:#fee500;color:#3c1e1e;border:none;padding:20px;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸŸ¡ ë…ì„œ ì¹´í†¡ ì œì¶œ</button>
        <div id="resArea_R" style="display:none;margin-top:20px"></div>
    </div>

    <div id="area_literature" style="display:none">
        <div class="notice-box"><b>[ê³µì§€]</b> ë¬¸í•™ì€ ì „ ë¬¸í•­ì„ ë‹¤ í’€ì–´ì•¼ í•©ë‹ˆë‹¤.<br>ğŸ“… ê¸°í•œ: 2026-02-05 ~ 2026-02-10<br>ğŸ”„ ì´ 3íšŒ ë„ì „ ê°€ëŠ¥</div>
        <div id="limitMsg_L" class="limit-msg-style" style="display:none;color:#d63031;font-weight:bold;text-align:center;margin-bottom:20px;padding:15px;background:#fab1a0;border-radius:12px"></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><input type="text" id="cN_L" placeholder="í•™ì›ëª…"> <input type="text" id="sN_L" placeholder="í•™ìƒ ì´ë¦„" oninput="checkLimitL()"></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><select id="sD_L" onchange="checkLimitL()"><option value="">ì œì¶œì¼ ì„ íƒ</option></select><a href="https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQA_iersuFIcRJ0aoMZ1n3BgAfx6jJuv1GD3fxSkMomRJvA?e=oeTXSP" target="_blank" style="display:flex;align-items:center;justify-content:center;background:#eee;color:#333;text-decoration:none;border-radius:10px;font-weight:bold;font-size:0.8rem">ğŸ“„ ë¬¸í•™ ë¬¸ì œì§€</a></div>
        <div id="qC_L"></div>
        <button id="subBtn_L" onclick="submitL()" style="width:100%;padding:20px;background:#6c5ce7;color:white;border:none;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸ“ ë¬¸í•™ ë‹µì•ˆ ì œì¶œ</button>
        <button id="kakaoBtn_L" onclick="shareL()" style="display:none;width:100%;background:#fee500;color:#3c1e1e;border:none;padding:20px;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸŸ¡ ë¬¸í•™ ì¹´í†¡ ì œì¶œ</button>
        <div id="resArea_L" style="display:none;margin-top:20px"></div>
    </div>
</div>

<script>
// ì „ì—­ ì„¤ì • (ì›ë³¸ ìœ ì§€)
const HW_ID_R = "HW_READING_", HW_ID_L = "HW_LITE_";
const startDay="2026-02-05", endDay="2026-02-10";
const maxT=3, waitMin=3;
const ansLink = "https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQDJXnaf1TE7R45JC-fvTM5YAYcQu41XkGqRdtNLTbcnJSI?e=AgGHyc";
const GAS_URL = "https://script.google.com/macros/s/AKfycbzkA0CC8GAhcdAP16fzq32ufyTIYolZ8TyeuSjW5FAsG0M3vPcYQOIaSKIOOYKYgtDc/exec";
const ADMIN_BASE_R = "https://saenarachild-crypto.github.io/kim-korean-homework/hw_0202_reading.htm";
const ADMIN_BASE_L = "https://saenarachild-crypto.github.io/kim-korean-homework/hw_0202_lite.htm";

try{if(!Kakao.isInitialized()){Kakao.init("f81d5eae0eaaf6fa2d0bdccbe6916001");}}catch(e){console.error(e);}

let timeLeft, timerInterval = null, currentType = 'reading';
let wR=0, attR=0, isBlockedR=false, resTR="", isPerfectR=false, wrongListStrR="";
let wL=0, attL=0, isBlockedL=false, resTL="", isPerfectL=false, wrongListStrL="";

function changeType(type){
    currentType = type;
    document.getElementById('area_reading').style.display = type === 'reading' ? 'block' : 'none';
    document.getElementById('area_literature').style.display = type === 'literature' ? 'block' : 'none';
    document.getElementById('btn_reading').className = 'type-btn' + (type === 'reading' ? ' active' : '');
    document.getElementById('btn_literature').className = 'type-btn' + (type === 'literature' ? ' active' : '');
    if(!timerInterval) document.getElementById("timeText").innerText = "ì…ë ¥ ê°€ëŠ¥";
}

// --- ë…ì„œ ë¡œì§ (ì„ ìƒë‹˜ ì½”ë“œ 1) ---
const mAnsR = [0, ..."414434455141123354353134123451513".split("").map(Number)];
const actR = [5,6,7,8,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30];
function initReading(){
    const sel=document.getElementById("sD_R"); const now=new Date(); now.setHours(0,0,0,0); const end=new Date(endDay);
    for(let d=new Date(now); d<=end; d.setDate(d.getDate()+1)){
        let s=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
        let opt=document.createElement("option"); opt.value=s; opt.innerText=s; sel.appendChild(opt);
    }
    let h=""; for(let n=1; n<=33; n++){
        const dis = actR.includes(n) ? "" : "disabled";
        h+="<div class='q-card'><div style='font-weight:bold;margin-bottom:15px;font-size:1.1rem'>"+n+"ë²ˆ</div><div class='options'>";
        for(let j=1;j<=5;j++){ h+="<input type='radio' name='rq"+n+"' id='rq"+n+"_"+j+"' value='"+j+"' class='opt-input' "+dis+"><label for='rq"+n+"_"+j+"' class='opt-label'>"+j+"</label>"; }
        h+="</div></div>";
    } document.getElementById("qC_R").innerHTML=h;
}
function submitR(){
    if(isBlockedR) return; const cN=document.getElementById("cN_R").value, sN=document.getElementById("sN_R").value.trim().replace(/\s/g,""), sD=document.getElementById("sD_R").value; if(!cN||!sN||!sD){alert("ì •ë³´ ì…ë ¥!"); return;}
    wR=0; let d=[]; actR.forEach(q => { let s=document.querySelector("input[name='rq"+q+"']:checked"); let v=s?parseInt(s.value):0; if(v!==mAnsR[q]){wR++; d.push(q);} });
    isPerfectR=(wR===0); wrongListStrR=d.join(","); attR=parseInt(localStorage.getItem("att_"+sN+"_"+HW_ID_R)||0)+1; localStorage.setItem("att_"+sN+"_"+HW_ID_R,attR); if(isPerfectR) localStorage.setItem("perf_"+sN+"_"+HW_ID_R,"true");
    resTR="[ë…ì„œ]\n"+sN+"("+attR+"íšŒì°¨) ì œì¶œ ì™„ë£Œ"; alert("ì¹´í†¡ ì „ì†¡ í›„ [ì™„ë£Œ] í´ë¦­!"); document.getElementById("subBtn_R").style.display="none"; document.getElementById("kakaoBtn_R").style.display="block";
    fetch(GAS_URL,{method:"POST",mode:"no-cors",body:JSON.stringify({exam:"ë…ì„œ",name:sN,class:cN,attempt:attR,wrongCount:wR,wrongList:wrongListStrR})});
}

// --- ë¬¸í•™ ë¡œì§ (ì„ ìƒë‹˜ ì½”ë“œ 2) ---
const mAnsL = [0, ..."1342344245242425251244231412445".split("").map(Number)];
function initLite(){
    const sel=document.getElementById("sD_L"); const now=new Date(); now.setHours(0,0,0,0); const end=new Date(endDay);
    for(let d=new Date(now); d<=end; d.setDate(d.getDate()+1)){
        let s=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
        let opt=document.createElement("option"); opt.value=s; opt.innerText=s; sel.appendChild(opt);
    }
    let h=""; for(let n=1; n<=31; n++){
        h+="<div class='q-card'><div style='font-weight:bold;margin-bottom:15px;font-size:1.1rem'>"+n+"ë²ˆ</div><div class='options'>";
        for(let j=1;j<=5;j++){ h+="<input type='radio' name='lq"+n+"' id='lq"+n+"_"+j+"' value='"+j+"' class='opt-input'><label for='lq"+n+"_"+j+"' class='opt-label'>"+j+"</label>"; }
        h+="</div></div>";
    } document.getElementById("qC_L").innerHTML=h;
}
function submitL(){
    if(isBlockedL) return; const cN=document.getElementById("cN_L").value, sN=document.getElementById("sN_L").value.trim().replace(/\s/g,""), sD=document.getElementById("sD_L").value; if(!cN||!sN||!sD){alert("ì •ë³´ ì…ë ¥!"); return;}
    wL=0; let d=[]; for(let i=1;i<=31;i++){ let s=document.querySelector("input[name='lq"+i+"']:checked"); let v=s?parseInt(s.value):0; if(v!==mAnsL[i]){wL++; d.push(i);} }
    isPerfectL=(wL===0); wrongListStrL=d.join(","); attL=parseInt(localStorage.getItem("att_"+sN+"_"+HW_ID_L)||0)+1; localStorage.setItem("att_"+sN+"_"+HW_ID_L,attL); if(isPerfectL) localStorage.setItem("perf_"+sN+"_"+HW_ID_L,"true");
    resTL="[ë¬¸í•™]\n"+sN+"("+attL+"íšŒì°¨) ì œì¶œ ì™„ë£Œ"; alert("ì¹´í†¡ ì „ì†¡ í›„ [ì™„ë£Œ] í´ë¦­!"); document.getElementById("subBtn_L").style.display="none"; document.getElementById("kakaoBtn_L").style.display="block";
    fetch(GAS_URL,{method:"POST",mode:"no-cors",body:JSON.stringify({exam:"ë¬¸í•™",name:sN,class:cN,attempt:attL,wrongCount:wL,wrongList:wrongListStrL})});
}

// --- ê³µí†µ ìœ í‹¸ë¦¬í‹° ---
function checkDateLimit(){
    const now=new Date(); now.setHours(0,0,0,0); const sD=new Date(startDay); const eD=new Date(endDay); eD.setHours(23,59,59,999);
    if(now < sD || now > eD){
        isBlockedR=isBlockedL=true; document.getElementById("subBtn_R").style.display=document.getElementById("subBtn_L").style.display="none";
        const msg = now < sD ? "â³ ì œì¶œ ê¸°ê°„ì´ ì•„ë‹™ë‹ˆë‹¤." : "ğŸš« ì œì¶œ ê¸°í•œì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.";
        document.getElementById("limitMsg_R").innerText=document.getElementById("limitMsg_L").innerText=msg;
        document.getElementById("limitMsg_R").style.display=document.getElementById("limitMsg_L").style.display="block";
    }
}
function checkLimitR(){
    const sN=document.getElementById("sN_R").value.trim().replace(/\s/g,""); if(sN.length<2) return;
    if(localStorage.getItem("perf_"+sN+"_"+HW_ID_R)=="true"){ isBlockedR=true; showResultR("ë°±ì  ë‹¬ì„±!"); return; }
    let att=parseInt(localStorage.getItem("att_"+sN+"_"+HW_ID_R)||0); if(att>=maxT){ isBlockedR=true; document.getElementById("subBtn_R").style.display="none"; document.getElementById("limitMsg_R").style.display="block"; document.getElementById("limitMsg_R").innerText="ğŸš« ëª¨ë“  ê¸°íšŒë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤."; showResultR("ê¸°íšŒ ì†Œì§„"); }
}
function checkLimitL(){
    const sN=document.getElementById("sN_L").value.trim().replace(/\s/g,""); if(sN.length<2) return;
    if(localStorage.getItem("perf_"+sN+"_"+HW_ID_L)=="true"){ isBlockedL=true; showResultL("ë°±ì  ë‹¬ì„±!"); return; }
    let att=parseInt(localStorage.getItem("att_"+sN+"_"+HW_ID_L)||0); if(att>=maxT){ isBlockedL=true; document.getElementById("subBtn_L").style.display="none"; document.getElementById("limitMsg_L").style.display="block"; document.getElementById("limitMsg_L").innerText="ğŸš« ëª¨ë“  ê¸°íšŒë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤."; showResultL("ê¸°íšŒ ì†Œì§„"); }
}
function startWaitTimer(){
    if(timerInterval) clearInterval(timerInterval); timeLeft = waitMin * 60;
    const btn = currentType === 'reading' ? document.getElementById("subBtn_R") : document.getElementById("subBtn_L");
    btn.style.opacity="0.5"; btn.innerText="ëŒ€ê¸° ì¤‘..."; btn.disabled=true;
    timerInterval = setInterval(()=>{
        if(timeLeft<=0){ clearInterval(timerInterval); timerInterval=null; btn.style.opacity="1"; btn.innerText="ğŸ“ ë‹µì•ˆ ì œì¶œí•˜ê¸°"; btn.disabled=false; document.getElementById("timeText").innerText="ì…ë ¥ ê°€ëŠ¥"; return; }
        timeLeft--; const m=Math.floor(timeLeft/60), s=timeLeft%60; document.getElementById("timeText").innerText="ë‹¤ìŒ ë„ì „ê¹Œì§€ "+m+"ë¶„ "+(s<10?"0"+s:s)+"ì´ˆ ë‚¨ìŒ";
    }, 1000);
}
function showResultR(msg){ document.getElementById("resArea_R").style.display="block"; document.getElementById("resArea_R").innerHTML="<div style='padding:25px;background:#eeebff;border-radius:15px;text-align:center'><h3>ğŸ "+msg+"</h3><p>ë…ì„œ ê³¼ì œê°€ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.</p><a href='"+ansLink+"' target='_blank' style='display:block;padding:15px;background:var(--p);color:white;text-decoration:none;border-radius:10px;font-weight:bold'>ğŸ“˜ í•´ì„¤ì§€ ë³´ê¸°</a></div>"; document.getElementById("subBtn_R").style.display="none"; }
function showResultL(msg){ document.getElementById("resArea_L").style.display="block"; document.getElementById("resArea_L").innerHTML="<div style='padding:25px;background:#eeebff;border-radius:15px;text-align:center'><h3>ğŸ "+msg+"</h3><p>ë¬¸í•™ ê³¼ì œê°€ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.</p><a href='"+ansLink+"' target='_blank' style='display:block;padding:15px;background:var(--p);color:white;text-decoration:none;border-radius:10px;font-weight:bold'>ğŸ“˜ í•´ì„¤ì§€ ë³´ê¸°</a></div>"; document.getElementById("subBtn_L").style.display="none"; }
function shareR(){ Kakao.Share.sendDefault({ objectType: "text", text: resTR, link: { mobileWebUrl: ADMIN_BASE_R, webUrl: ADMIN_BASE_R } }); openOverlay('R'); }
function shareL(){ Kakao.Share.sendDefault({ objectType: "text", text: resTL, link: { mobileWebUrl: ADMIN_BASE_L, webUrl: ADMIN_BASE_L } }); openOverlay('L'); }
function openOverlay(t){ setTimeout(()=>{ const o=document.getElementById("overlay"); o.style.display="flex"; o.innerHTML="<div style='background:white;padding:30px;border-radius:20px;text-align:center'><p style='font-weight:bold'>ì¹´í†¡ìœ¼ë¡œ ì „ì†¡í•˜ì…¨ë‚˜ìš”?</p><button onclick='done"+t+"()' style='width:100%;padding:12px;background:#fee500;border:none;border-radius:10px;font-weight:bold;cursor:pointer'>ë„¤, ì™„ë£Œí–ˆìŠµë‹ˆë‹¤</button></div>";},1500); }
function doneR(){ 
    document.getElementById("overlay").style.display="none"; document.getElementById("kakaoBtn_R").style.display="none"; 
    if(isPerfectR){showResultR("ë°±ì  ë‹¬ì„±!"); return;} if(attR>=maxT){showResultR("ê¸°íšŒ ì†Œì§„"); return;}
    alert("ğŸ“Š ë…ì„œ "+attR+"íšŒì°¨ ê²°ê³¼: ì˜¤ë‹µ "+wR+"ê°œ" + (attR === maxT - 1 ? "\nğŸ“ í‹€ë¦° ë²ˆí˜¸ íŒíŠ¸: " + (wrongListStrR||"ì—†ìŒ") : ""));
    document.querySelectorAll("#area_reading .opt-input").forEach(rb=>{if(!rb.disabled) rb.checked=false;}); 
    document.getElementById("subBtn_R").style.display="block"; startWaitTimer(); 
}
function doneL(){ 
    document.getElementById("overlay").style.display="none"; document.getElementById("kakaoBtn_L").style.display="none"; 
    if(isPerfectL){showResultL("ë°±ì  ë‹¬ì„±!"); return;} if(attL>=maxT){showResultL("ê¸°íšŒ ì†Œì§„"); return;}
    alert("ğŸ“Š ë¬¸í•™ "+attL+"íšŒì°¨ ê²°ê³¼: ì˜¤ë‹µ "+wL+"ê°œ" + (attL === maxT - 1 ? "\nğŸ“ í‹€ë¦° ë²ˆí˜¸ íŒíŠ¸: " + (wrongListStrL||"ì—†ìŒ") : ""));
    document.querySelectorAll("#area_literature .opt-input").forEach(rb=>{if(!rb.disabled) rb.checked=false;}); 
    document.getElementById("subBtn_L").style.display="block"; startWaitTimer(); 
}

window.onload = function(){
    initReading(); initLite(); checkDateLimit();
};
</script>
</body>
</html>