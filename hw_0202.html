<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ì£¼ê°„ ê³¼ì œ 2ì›” 2íšŒì°¨ í†µí•©</title>
<meta property="og:title" content="ê¹€í˜„ì„ êµ­ì–´ - 2ì›” 2íšŒì°¨ ì£¼ê°„ ê³¼ì œ">
<meta property="og:description" content="ê¸°í•œ: ~2/10(í™”) 24:00 | ë…ì„œ/ë¬¸í•™ í†µí•© ì œì¶œ">
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"></script>
<style>
:root{--p:#6c5ce7;--bg:#f8f9fc}body{font-family:-apple-system,sans-serif;background:var(--bg);padding:15px;margin:0}.container{max-width:600px;margin:0 auto;background:#fff;padding:25px;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,0.1)}.notice-box{background:#fff3e0;padding:15px;border-radius:12px;margin-bottom:20px;font-size:0.9rem;color:#5d4037;line-height:1.6}.q-card{background:#fff;border:1.5px solid #eee;border-radius:15px;padding:20px;margin-bottom:12px}.options{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;position:relative}.opt-input{position:absolute;width:0;height:0;opacity:0;pointer-events:none}.opt-label{height:45px;border:1.5px solid #eee;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;cursor:pointer;transition:0.2s;position:relative;z-index:1}.opt-input:checked+.opt-label{background:var(--p);color:#fff;box-shadow:0 5px 12px rgba(108,92,231,0.3)}.opt-input:disabled+.opt-label{background:#eee;color:#bbb;cursor:not-allowed;border:none}#timer{font-weight:bold;color:#ff6b6b;text-align:right;font-size:1.0rem;margin-bottom:10px}#overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:99;align-items:center;justify-content:center}input,select{padding:12px;border:1px solid #ddd;border-radius:10px;width:100%;box-sizing:border-box;outline:none}
.type-selector{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:20px}.type-btn{padding:15px;border:2px solid var(--p);border-radius:12px;background:#fff;color:var(--p);font-weight:bold;cursor:pointer;transition:0.3s}.type-btn.active{background:var(--p);color:#fff}
</style>
<script>
window.onload = function() {
  const urlParams = new URLSearchParams(window.location.search);
  if(urlParams.has("admin_view")){
    const data = JSON.parse(decodeURIComponent(urlParams.get("admin_view")));
    document.body.innerHTML = "<div class='container' style='margin-top:50px; text-align:center; box-shadow: 0 0 100px rgba(0,0,0,0.2); border: 3px solid #6c5ce7;'><h2>ğŸ“Š ì„±ì  í™•ì¸</h2><div class='notice-box' style='text-align:left; font-size:1.1rem; line-height:2;'><b>ğŸ‘¤ ì´ë¦„:</b> "+data.name+"<br><b>ğŸ« í•™ì›:</b> "+data.class+"<br><b>ğŸ”„ ë„ì „:</b> "+data.att+"íšŒì°¨<br><b>âŒ ì˜¤ë‹µ:</b> <span style='color:red'>"+data.wrongCount+"ê°œ</span><br><b>ğŸ“ ë²ˆí˜¸:</b> "+(data.wrongList||"ì—†ìŒ")+"</div><button onclick='location.href=location.href.split(\"?\")[0]' style='width:100%;padding:15px;background:#6c5ce7;color:white;border:none;border-radius:10px;font-weight:bold;cursor:pointer'>ëŒì•„ê°€ê¸°</button></div>";
    return;
  }
  initPage();
};
</script>
</head><body><div id="overlay"></div><div class="container"><h2 style="text-align:center">2ì›” 2íšŒì°¨ ì£¼ê°„ ê³¼ì œ</h2>
<div class="type-selector">
  <button id="btnR" class="type-btn active" onclick="changeType('R')">ğŸ“˜ ë…ì„œ</button>
  <button id="btnL" class="type-btn" onclick="changeType('L')">ğŸ“• ë¬¸í•™</button>
</div>
<div id="timer">â± <span id="timeText">--ë¶„ --ì´ˆ ë‚¨ìŒ</span></div>

<div id="areaR">
  <div class="notice-box"><b>[ê³µì§€]</b> ì§€ì • ì§€ë¬¸ë§Œ í’€ ê²ƒ. (5~8, 13~30ë²ˆ)<br>ğŸ“… ê¸°í•œ: 2026-02-05 ~ 2026-02-10<br>ğŸ”„ ì´ 3íšŒ ë„ì „ ê°€ëŠ¥</div>
  <div id="limitMsgR" style="display:none;color:#d63031;font-weight:bold;text-align:center;margin-bottom:20px;padding:15px;background:#fab1a0;border-radius:12px"></div>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><input type="text" id="cNR" placeholder="í•™ì›ëª…"> <input type="text" id="sNR" placeholder="í•™ìƒ ì´ë¦„" oninput="checkLimit('R')"></div>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><select id="sDR" onchange="checkLimit('R')"><option value="">ì œì¶œì¼ ì„ íƒ</option></select><a href="https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQA0rZBWBuzuRJ_bZzMddyaMActX3fxV9pevd4DJedcF_fQ?e=daSLlG" target="_blank" style="display:flex;align-items:center;justify-content:center;background:#eee;color:#333;text-decoration:none;border-radius:10px;font-weight:bold;font-size:0.8rem">ğŸ“„ ë…ì„œ ë¬¸ì œì§€</a></div>
  <div id="qCR"></div>
  <button id="subBtnR" onclick="submit('R')" style="width:100%;padding:20px;background:#ff6b6b;color:white;border:none;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸ“ ë…ì„œ ë‹µì•ˆ ì œì¶œ</button>
  <button id="kakaoBtnR" onclick="share('R')" style="display:none;width:100%;background:#fee500;color:#3c1e1e;border:none;padding:20px;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸŸ¡ ë…ì„œ ì¹´í†¡ ì œì¶œ</button>
  <div id="resAreaR" style="display:none;margin-top:20px"></div>
</div>

<div id="areaL" style="display:none">
  <div class="notice-box"><b>[ê³µì§€]</b> ë¬¸í•™ì€ ì „ ë¬¸í•­ì„ ë‹¤ í’€ì–´ì•¼ í•©ë‹ˆë‹¤.<br>ğŸ“… ê¸°í•œ: 2026-02-05 ~ 2026-02-10<br>ğŸ”„ ì´ 3íšŒ ë„ì „ ê°€ëŠ¥</div>
  <div id="limitMsgL" style="display:none;color:#d63031;font-weight:bold;text-align:center;margin-bottom:20px;padding:15px;background:#fab1a0;border-radius:12px"></div>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><input type="text" id="cNL" placeholder="í•™ì›ëª…"> <input type="text" id="sNL" placeholder="í•™ìƒ ì´ë¦„" oninput="checkLimit('L')"></div>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px"><select id="sDL" onchange="checkLimit('L')"><option value="">ì œì¶œì¼ ì„ íƒ</option></select><a href="https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQA_iersuFIcRJ0aoMZ1n3BgAfx6jJuv1GD3fxSkMomRJvA?e=oeTXSP" target="_blank" style="display:flex;align-items:center;justify-content:center;background:#eee;color:#333;text-decoration:none;border-radius:10px;font-weight:bold;font-size:0.8rem">ğŸ“„ ë¬¸í•™ ë¬¸ì œì§€</a></div>
  <div id="qCL"></div>
  <button id="subBtnL" onclick="submit('L')" style="width:100%;padding:20px;background:#6c5ce7;color:white;border:none;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸ“ ë¬¸í•™ ë‹µì•ˆ ì œì¶œ</button>
  <button id="kakaoBtnL" onclick="share('L')" style="display:none;width:100%;background:#fee500;color:#3c1e1e;border:none;padding:20px;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;font-size:1.1rem">ğŸŸ¡ ë¬¸í•™ ì¹´í†¡ ì œì¶œ</button>
  <div id="resAreaL" style="display:none;margin-top:20px"></div>
</div>
</div>

<script>
let timeLeft, timerInterval = null, currentT = 'R';
const sets = {
  R: { ans: [0, ..."414434455141123354353134123451513".split("").map(Number)], act: [5,6,7,8,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30], total: 33, id: "HW_0202_R", base: "https://saenarachild-crypto.github.io/kim-korean-homework/hw_0202_reading.htm" },
  L: { ans: [0, ..."1342344245242425251244231412445".split("").map(Number)], act: Array.from({length:31},(_,i)=>i+1), total: 31, id: "HW_0202_L", base: "https://saenarachild-crypto.github.io/kim-korean-homework/hw_0202_lite.htm" }
};
const maxT=3, waitMin=3, startDay="2026-02-05", endDay="2026-02-10", GAS_URL = "https://script.google.com/macros/s/AKfycbzkA0CC8GAhcdAP16fzq32ufyTIYolZ8TyeuSjW5FAsG0M3vPcYQOIaSKIOOYKYgtDc/exec", ansLink = "https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQDJXnaf1TE7R45JC-fvTM5YAYcQu41XkGqRdtNLTbcnJSI?e=AgGHyc";
let status = { R: {w:0, att:0, blocked:false, resT:"", perfect:false, wList:""}, L: {w:0, att:0, blocked:false, resT:"", perfect:false, wList:""} };

try{if(!Kakao.isInitialized()){Kakao.init("f81d5eae0eaaf6fa2d0bdccbe6916001");}}catch(e){}

function changeType(t){
  currentT = t;
  document.getElementById('areaR').style.display = t==='R'?'block':'none';
  document.getElementById('areaL').style.display = t==='L'?'block':'none';
  document.getElementById('btnR').className = 'type-btn'+(t==='R'?' active':'');
  document.getElementById('btnL').className = 'type-btn'+(t==='L'?' active':'');
}

function initPage(){
  ['R','L'].forEach(t => {
    const sel=document.getElementById("sD"+t);
    for(let d=new Date(startDay); d<=new Date(endDay); d.setDate(d.getDate()+1)){
      let s=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
      let opt=document.createElement("option"); opt.value=s; opt.innerText=s; sel.appendChild(opt);
    }
    let h=""; for(let n=1; n<=sets[t].total; n++){
      const dis = sets[t].act.includes(n) ? "" : "disabled";
      h+="<div class='q-card'><div style='font-weight:bold;margin-bottom:15px;font-size:1.1rem'>"+n+"ë²ˆ</div><div class='options'>";
      for(let j=1;j<=5;j++){ h+="<input type='radio' name='q"+t+n+"' id='q"+t+n+"_"+j+"' value='"+j+"' class='opt-input' "+dis+"><label for='q"+t+n+"_"+j+"' class='opt-label'>"+j+"</label>"; }
      h+="</div></div>";
    } document.getElementById("qC"+t).innerHTML=h;
  });
  checkDateLimit();
}

function checkDateLimit(){
  const now=new Date(); now.setHours(0,0,0,0);
  const isOff = now < new Date(startDay) || now > new Date(endDay).setHours(23,59,59);
  ['R','L'].forEach(t => {
    status[t].blocked = isOff;
    document.getElementById("subBtn"+t).style.display = isOff?'none':'block';
    if(isOff) { document.getElementById("limitMsg"+t).style.display='block'; document.getElementById("limitMsg"+t).innerText="â³ ì œì¶œ ê¸°ê°„ì´ ì•„ë‹™ë‹ˆë‹¤."; }
  });
}

function checkLimit(t){
  const sN=document.getElementById("sN"+t).value.trim(); if(sN.length<2) return;
  const key="att_"+sN+"_"+sets[t].id; status[t].att=parseInt(localStorage.getItem(key)||0);
  if(localStorage.getItem("perf_"+sN+"_"+sets[t].id)=="true"){ status[t].blocked=true; showFinal(t, "ë°±ì  ë‹¬ì„±!"); return; }
  if(status[t].att>=maxT){ status[t].blocked=true; document.getElementById("subBtn"+t).style.display="none"; document.getElementById("limitMsg"+t).style.display="block"; document.getElementById("limitMsg"+t).innerText="ğŸš« ê¸°íšŒ ì†Œì§„"; showFinal(t, "ê¸°íšŒ ì†Œì§„"); }
}

function submit(t){
  if(status[t].blocked) return;
  const cN=document.getElementById("cN"+t).value, sN=document.getElementById("sN"+t).value.trim(), sD=document.getElementById("sD"+t).value;
  if(!cN||!sN||!sD){alert("ì •ë³´ ì…ë ¥!"); return;}
  status[t].w=0; let d=[]; sets[t].act.forEach(n => { let s=document.querySelector("input[name='q"+t+n+"']:checked"); if((s?parseInt(s.value):0)!==sets[t].ans[n]){status[t].w++; d.push(n);} });
  status[t].perfect=(status[t].w===0); status[t].wList=d.join(",");
  const key="att_"+sN+"_"+sets[t].id; status[t].att=parseInt(localStorage.getItem(key)||0)+1; localStorage.setItem(key, status[t].att);
  if(status[t].perfect) localStorage.setItem("perf_"+sN+"_"+sets[t].id, "true");
  status[t].resT="["+(t==='R'?'ë…ì„œ':'ë¬¸í•™')+"]\n"+sN+"("+status[t].att+"íšŒì°¨) ì œì¶œ ì™„ë£Œ";
  alert("ì¹´í†¡ ì „ì†¡ í›„ [ì™„ë£Œ] í´ë¦­!"); document.getElementById("subBtn"+t).style.display="none"; document.getElementById("kakaoBtn"+t).style.display="block";
  fetch(GAS_URL,{method:"POST",mode:"no-cors",body:JSON.stringify({exam:(t==='R'?'ë…ì„œ':'ë¬¸í•™'),name:sN,class:cN,attempt:status[t].att,wrongCount:status[t].w,wrongList:status[t].wList})});
}

function share(t){ Kakao.Share.sendDefault({ objectType:"text", text:status[t].resT, link:{ mobileWebUrl:sets[t].base, webUrl:sets[t].base } }); setTimeout(()=>{ document.getElementById("overlay").style.display="flex"; document.getElementById("overlay").innerHTML="<div style='background:white;padding:30px;border-radius:20px;text-align:center'><p>ì „ì†¡ ì™„ë£Œí–ˆë‚˜ìš”?</p><button onclick='done(\""+t+"\")' style='width:100%;padding:12px;background:#fee500;border:none;border-radius:10px;font-weight:bold'>ë„¤, ì™„ë£Œí–ˆìŠµë‹ˆë‹¤</button></div>"; },1500); }

function done(t){
  document.getElementById("overlay").style.display="none"; document.getElementById("kakaoBtn"+t).style.display="none";
  if(status[t].perfect){showFinal(t, "ë°±ì  ë‹¬ì„±!"); return;}
  if(status[t].att>=maxT){showFinal(t, "ê¸°íšŒ ì†Œì§„"); return;}
  alert("ğŸ“Š ê²°ê³¼: ì˜¤ë‹µ "+status[t].w+"ê°œ" + (status[t].att===maxT-1?"\nğŸ“ íŒíŠ¸: "+status[t].wList:""));
  document.querySelectorAll("#area"+t+" .opt-input").forEach(rb=>{if(!rb.disabled) rb.checked=false;});
  document.getElementById("subBtn"+t).style.display="block"; startWaitTimer(t);
}

function startWaitTimer(t){
  timeLeft = waitMin * 60; const btn=document.getElementById("subBtn"+t); btn.disabled=true; btn.style.opacity="0.5";
  timerInterval = setInterval(()=>{
    if(timeLeft<=0){ clearInterval(timerInterval); timerInterval=null; btn.disabled=false; btn.style.opacity="1"; document.getElementById("timeText").innerText="ì…ë ¥ ê°€ëŠ¥"; return; }
    timeLeft--; const m=Math.floor(timeLeft/60), s=timeLeft%60; document.getElementById("timeText").innerText=m+"ë¶„ "+(s<10?"0"+s:s)+"ì´ˆ ë‚¨ìŒ";
  },1000);
}

function showFinal(t, msg){ const r=document.getElementById("resArea"+t); r.style.display="block"; r.innerHTML="<div style='padding:25px;background:#eeebff;border-radius:15px;text-align:center'><h3>ğŸ "+msg+"</h3><p>ê³¼ì œê°€ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.</p><a href='"+ansLink+"' target='_blank' style='display:block;padding:15px;background:var(--p);color:white;text-decoration:none;border-radius:10px;font-weight:bold'>ğŸ“˜ í•´ì„¤ì§€ ë³´ê¸°</a></div>"; document.getElementById("subBtn"+t).style.display="none"; }
</script></body></html>