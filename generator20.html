<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>í•œë°±ê³  êµ­ì–´ ê³¼ì œ ì‹œìŠ¤í…œ</title>
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"></script>
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background: #f0f2f5; padding: 15px; margin: 0; color: #333; }
        .container { max-width: 600px; margin: 0 auto; background: #fff; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #1a73e8; margin-bottom: 20px; }
        
        /* ì…€ë ‰íŠ¸ ë°•ìŠ¤ ë””ìì¸ */
        #examSelect { width: 100%; padding: 15px; border-radius: 12px; border: 2px solid #e1e4e8; font-size: 1rem; margin-bottom: 20px; outline: none; }
        
        /* OMR ë¬¸í•­ ë””ìì¸ */
        .qBox { display: flex; justify-content: space-between; align-items: center; padding: 12px 5px; border-bottom: 1px solid #f1f3f4; }
        .qNum { font-weight: bold; color: #5f6368; }
        .qChoices { display: flex; gap: 8px; }
        .choice input { display: none; }
        .choice span { 
            display: inline-block; width: 35px; height: 35px; line-height: 35px; text-align: center; 
            border: 1px solid #ddd; border-radius: 50%; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .choice input:checked + span { background: #1a73e8; color: white; border-color: #1a73e8; transform: scale(1.1); }
        
        /* ë²„íŠ¼ ê³µí†µ ë””ìì¸ */
        .btn { width: 100%; padding: 16px; border-radius: 12px; font-weight: bold; font-size: 1.1rem; border: none; cursor: pointer; margin-top: 12px; display: block; text-align: center; text-decoration: none; box-sizing: border-box; }
        #subBtn { background: #ff5252; color: white; box-shadow: 0 4px 15px rgba(255,82,82,0.3); }
        #kakaoBtn { background: #fee500; color: #3c1e1e; display: none; }
        #pdfBtn { background: #34a853; color: white; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ“– êµ­ì–´ ê³¼ì œ ì œì¶œ</h2>

    <select id="examSelect" onchange="loadExam()">
        <option value="">ğŸ“ ê³¼ì œ íšŒì°¨ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
        <option value="week3">1ì›” 3ì£¼ì°¨ ì£¼ê°„ì§€</option>
        <option value="week4">1ì›” 4ì£¼ì°¨ ì£¼ê°„ì§€</option>
    </select>

    <div id="qArea"></div>

    <button id="subBtn" class="btn" onclick="submit()">ğŸ“ ì±„ì  ë° ê²°ê³¼ ì œì¶œ</button>
    <a id="kakaoBtn" class="btn" onclick="share()">ğŸŸ¡ ì¹´í†¡ìœ¼ë¡œ ê²°ê³¼ ê³µìœ </a>
    <a id="pdfBtn" class="btn" onclick="openPDF()">ğŸ“„ ì •ë‹µ ë° í•´ì„¤ì§€ ë³´ê¸°</a>
</div>

<script>
// [ë³´ì•ˆ ì§€ì¹¨ ì¤€ìˆ˜] JavaScript í‚¤
Kakao.init("f81d5eae0eaaf6fa2d0bdccbe6916001");

// ê³¼ì œ ë°ì´í„° ê´€ë¦¬
const exams = {
    week3: { title: "1ì›” 3ì£¼ì°¨", ans: [3,1,1,4,5,4], pdf: "https://example.com/3.pdf" },
    week4: { title: "1ì›” 4ì£¼ì°¨", ans: [2,3,4,1,5,2], pdf: "https://example.com/4.pdf" }
};

let correct = [], pdfUrl = "", resultText = "", currentTitle = "";

function loadExam() {
    const k = document.getElementById("examSelect").value;
    if (!k) { document.getElementById("qArea").innerHTML = ""; return; }
    
    correct = exams[k].ans;
    pdfUrl = exams[k].pdf;
    currentTitle = exams[k].title;
    
    let h = "";
    correct.forEach((_, i) => {
        h += `<div class="qBox"><div class="qNum">${i + 1}ë²ˆ</div><div class="qChoices">`;
        for (let j = 1; j <= 5; j++) {
            h += `<label class="choice"><input type="radio" name="q${i}" value="${j}"><span>${j}</span></label>`;
        }
        h += `</div></div>`;
    });
    document.getElementById("qArea").innerHTML = h;
    
    // íšŒì°¨ ë³€ê²½ ì‹œ ë²„íŠ¼ ìƒíƒœ ì´ˆê¸°í™”
    document.getElementById("subBtn").style.display = "block";
    document.getElementById("kakaoBtn").style.display = "none";
    document.getElementById("pdfBtn").style.display = "none";
}

function submit() {
    const h = prompt("í•™ì›ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: í•œë°±ê³ ì „)");
    const n = prompt("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”");
    if (!h || !n) { alert("í•™ì›ëª…ê³¼ ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì•¼ ì œì¶œë©ë‹ˆë‹¤."); return; }

    let w = 0, wrong = [];
    correct.forEach((ans, i) => {
        const sel = document.querySelector(`input[name="q${i}"]:checked`);
        const v = sel ? parseInt(sel.value) : 0;
        if (v !== ans) { w++; wrong.push(i + 1); }
    });

    resultText = `[${currentTitle} ê³¼ì œ ì™„ë£Œ]\nğŸ“Œ í•™ì›: ${h}\nğŸ‘¤ í•™ìƒ: ${n}\nâŒ ì˜¤ë‹µ: ${w}ê°œ\nâ¡ï¸ ë²ˆí˜¸: ${wrong.join(", ") || "ì—†ìŒ(ë§Œì !)"}`;

    // [ì¤‘ìš”] ë””ìŠ¤ì½”ë“œ/ìŠ¬ë™ ì›¹í›… ì£¼ì†Œë¥¼ ì•„ë˜ URL ìë¦¬ì— ë„£ìœ¼ì„¸ìš”
    const WEBHOOK_URL = "ì—¬ê¸°ì—_ë””ìŠ¤ì½”ë“œ_í˜¹ì€_ìŠ¬ë™_ì›¹í›…_ì£¼ì†Œë¥¼_ì…ë ¥í•˜ì„¸ìš”";

    if(WEBHOOK_URL.startsWith("http")) {
        fetch(WEBHOOK_URL, {
            method: "POST", headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ content: "ğŸ”” **ê³¼ì œ ì œì¶œ ì•Œë¦¼**\n" + resultText })
        }).catch(e => console.error("Webhook Error", e));
    }

    alert(`ì±„ì  ì™„ë£Œ! ì˜¤ë‹µì€ ${w}ê°œì…ë‹ˆë‹¤.`);
    document.getElementById("subBtn").style.display = "none";
    document.getElementById("kakaoBtn").style.display = "block";
    document.getElementById("pdfBtn").style.display = "block";
}

function share() {
    Kakao.Share.sendDefault({
        objectType: "text",
        text: resultText,
        link: { mobileWebUrl: location.href, webUrl: location.href }
    });
}

function openPDF() { window.open(pdfUrl, "_blank"); }
</script>
</body>
</html>