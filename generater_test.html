<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Master Code Generator v67.1</title>
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; background: #f4f7f6; }
        .box { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; }
        input, textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #6c5ce7; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1.1em; font-weight: bold; }
        #output { width: 100%; height: 300px; margin-top: 20px; display: none; }
    </style>
</head>
<body>

<div class="box">
    <h2>ğŸš€ 1êµì‹œ êµ­ì–´ ê³¼ì œ ì „ì²´ ì½”ë“œ ìƒì„±ê¸°</h2>
    <p>ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>GitHubì— ì˜¬ë¦´ ì „ì²´ ì½”ë“œ</b>ê°€ ìƒì„±ë©ë‹ˆë‹¤.</p>
    
    <input type="text" id="title" placeholder="ê³¼ì œ ì œëª© (ì˜ˆ: 2ì›” 1íšŒì°¨ ì£¼ê°„ ê³¼ì œ)">
    <input type="text" id="startDay" placeholder="ì‹œì‘ ë‚ ì§œ (YYYY-MM-DD)">
    <input type="text" id="endDay" placeholder="ì¢…ë£Œ ë‚ ì§œ (YYYY-MM-DD)">
    <textarea id="ansUnm" placeholder="ì–¸ë§¤ ì •ë‹µ (ìˆ«ìë§Œ ê¸¸ê²Œ ì…ë ¥)"></textarea>
    <textarea id="ansHwj" placeholder="í™”ì‘ ì •ë‹µ (ìˆ«ìë§Œ ê¸¸ê²Œ ì…ë ¥)"></textarea>
    <input type="text" id="pdfLink" placeholder="ë¬¸ì œì§€ ë§í¬">
    <input type="text" id="ansLink" placeholder="í•´ì„¤ì§€ ë§í¬">
    <textarea id="notice" placeholder="ëŒ€ë¬¸ ê³µì§€ ë©”ì‹œì§€"></textarea>
    <input type="text" id="gasUrl" placeholder="GAS ë°°í¬ URL">
    
    <button onclick="generate()">âœ¨ ì „ì²´ ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    
    <textarea id="output" readonly></textarea>
</div>

<script>
function generate() {
    const d = {
        title: document.getElementById('title').value,
        startDay: document.getElementById('startDay').value,
        endDay: document.getElementById('endDay').value,
        ansUnm: document.getElementById('ansUnm').value,
        ansHwj: document.getElementById('ansHwj').value,
        pdf: document.getElementById('pdfLink').value,
        ans: document.getElementById('ansLink').value,
        msg: document.getElementById('notice').value.replace(/\n/g, '<br>'),
        gas: document.getElementById('gasUrl').value
    };

    const finalCode = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <title>1êµì‹œ ê¹€í˜„ì„ êµ­ì–´</title>
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"><\/script>
    <script src="https://www.gstatic.com/charts/loader.js"><\/script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        :root { --p: #6c5ce7; --bg: #f8f9fc; --border: #e2e8f0; }
        body { background: var(--bg); font-family: 'Pretendard', sans-serif; margin: 0; padding: 20px; color: #2d3436; -webkit-tap-highlight-color: transparent; }
        .container { max-width: 650px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.03); }
        #introPage { text-align: center; padding: 20px 0; }
        .intro-notice { background: #fff9f0; border: 2px dashed #ffcc80; border-radius: 20px; padding: 25px; margin: 25px 0; text-align: left; }
        .start-btn { width: 100%; padding: 22px; background: var(--p); color: white; border: none; border-radius: 20px; font-size: 1.25em; font-weight: 800; cursor: pointer; }
        #examPage { display: none; } 
        .notice-box { background: #fff3e0; padding: 15px; border-radius: 12px; margin-bottom: 20px; font-size: 0.9rem; color: #5d4037; border: 1px solid #ffcc80; }
        .subject-selector { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .sub-btn { padding: 15px; border: 2px solid #eee; border-radius: 12px; background: #fff; font-weight: bold; cursor: pointer; }
        .sub-btn.active { border-color: var(--p); background: #f0edff; color: var(--p); }
        .q-card { border: 1px solid var(--border); border-radius: 20px; padding: 20px; margin-bottom: 15px; background: #fff; }
        .options { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
        .opt-input { position: absolute; opacity: 0; }
        .opt-label { height: 50px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--border); border-radius: 12px; cursor: pointer; font-weight: 700; background: #fff; }
        .opt-input:checked + .opt-label { background: var(--p); color: white; border-color: var(--p); }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 99; align-items: center; justify-content: center; }
        input, select { padding: 12px; border: 1px solid #ddd; border-radius: 10px; width: 100%; box-sizing: border-box; outline: none; }
    </style>
</head>
<body>
<div id="overlay"></div>
<div class="container">
    <div id="introPage">
        <img src="https://saenarachild-crypto.github.io/kim-korean-homework/logo.jpg" style="width:140px; border-radius:25px;">
        <h1>1êµì‹œ ê¹€í˜„ì„ êµ­ì–´</h1>
        <div class="intro-notice">
            <h3>ğŸ“¢ í•„ìˆ˜ ê³µì§€</h3>
            <p id="mainNotice">${d.msg}</p>
        </div>
        <button class="start-btn" onclick="startApp()">í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê³¼ì œ ì‹œì‘!</button>
    </div>
    <div id="examPage">
        <h2 style="text-align:center">${d.title}</h2>
        <div id="timer" style="text-align:right; font-weight:bold; color:#ff6b6b; margin-bottom:10px;">â± <span id="timeText">--ë¶„ --ì´ˆ ë‚¨ìŒ</span></div>
        <div class="subject-selector">
            <button id="btn_unm" class="sub-btn active" onclick="setSubject('unm')">ì–¸ì–´ì™€ ë§¤ì²´</button>
            <button id="btn_hwj" class="sub-btn" onclick="setSubject('hwj')">í™”ë²•ê³¼ ì‘ë¬¸</button>
        </div>
        <div class="notice-box"><b>[ê³µì§€]</b> ${d.msg}</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px">
            <input type="text" id="cN" placeholder="í•™ì›ëª…">
            <input type="text" id="sN" placeholder="í•™ìƒ ì´ë¦„">
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px">
            <select id="sD"></select>
            <a href="${d.pdf}" target="_blank" style="display:flex;align-items:center;justify-content:center;background:#eee;color:#333;text-decoration:none;border-radius:10px;font-weight:bold;font-size:0.8rem">ğŸ“„ ë¬¸ì œì§€</a>
        </div>
        <div id="qC"></div>
        <button id="subBtn" onclick="submit()" style="width:100%;padding:20px;background:#ff6b6b;color:white;border:none;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;">ğŸ“ ë‹µì•ˆ ì œì¶œí•˜ê¸°</button>
        <button id="kakaoBtn" onclick="share()" style="display:none;width:100%;background:#fee500;color:#3c1e1e;border:none;padding:20px;border-radius:15px;font-weight:bold;margin-top:20px;cursor:pointer;">ğŸŸ¡ ì¹´í†¡ìœ¼ë¡œ ì œì¶œ í™•ì¸</button>
        <div id="resArea" style="display:none;margin-top:20px"></div>
    </div>
</div>
<script>
    const CONFIG = { title: "${d.title}", start: "${d.startDay}", end: "${d.endDay}", gas: "${d.gas}", ansLink: "${d.ans}" };
    const answers = { unm: [0, ..."${d.ansUnm}".split("").map(Number)], hwj: [0, ..."${d.ansHwj}".split("").map(Number)] };
    let masterAnswers = answers.unm, currentSubject = "unm", w=0, att=0, isPerfect=false, resT="";

    try { Kakao.init('f81d5eae0eaaf6fa2d0bdccbe6916001'); } catch(e){}

    function startApp() { document.getElementById('introPage').style.display='none'; document.getElementById('examPage').style.display='block'; initPage(); }
    function setSubject(sub) { 
        currentSubject = sub; masterAnswers = answers[sub]; 
        document.getElementById("btn_unm").className = "sub-btn" + (sub==='unm'?' active':'');
        document.getElementById("btn_hwj").className = "sub-btn" + (sub==='hwj'?' active':'');
    }
    function initPage() {
        const sel=document.getElementById("sD"); sel.innerHTML="";
        let loop = new Date(CONFIG.start);
        while(loop <= new Date(CONFIG.end)) {
            let s=loop.toISOString().split('T')[0];
            let o=document.createElement("option"); o.value=s; o.innerText=s; sel.appendChild(o);
            loop.setDate(loop.getDate()+1);
        }
        let h=""; for(let i=1; i<masterAnswers.length; i++) {
            h+='<div class="q-card"><b>'+i+'ë²ˆ</b><div class="options">';
            for(let j=1; j<=5; j++) h+='<input type="radio" name="q'+i+'" id="q'+i+'_'+j+'" value="'+j+'" class="opt-input"><label for="q'+i+'_'+j+'" class="opt-label">'+j+'</label>';
            h+='</div></div>';
        } document.getElementById("qC").innerHTML=h;
    }
    function submit() {
        const cN=document.getElementById("cN").value, sN=document.getElementById("sN").value.trim(), sD=document.getElementById("sD").value;
        if(!cN||!sN||!sD) return alert("í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
        w=0; let d=[];
        for(let i=1; i<masterAnswers.length; i++){
            let s=document.querySelector("input[name='q"+i+"']:checked");
            if((s?parseInt(s.value):0)!==masterAnswers[i]){ w++; d.push(i); }
        }
        isPerfect=(w===0); att=parseInt(localStorage.getItem("att_"+sN+"_"+CONFIG.title)||0)+1;
        localStorage.setItem("att_"+sN+"_"+CONFIG.title, att);
        resT="["+CONFIG.title+"] "+sN+"("+att+"íšŒ) ì œì¶œ ì™„ë£Œ";
        document.getElementById("subBtn").style.display="none"; document.getElementById("kakaoBtn").style.display="block";
        fetch(CONFIG.gas,{method:"POST",mode:"no-cors",body:JSON.stringify({exam:CONFIG.title,name:sN,class:cN,attempt:att,wrongCount:w,wrongList:d.join(",")})});
    }
    function share() {
        Kakao.Share.sendDefault({ objectType:"text", text:resT, link:{ mobileWebUrl:window.location.href, webUrl:window.location.href } });
        setTimeout(()=>{
            const o=document.getElementById("overlay"); o.style.display="flex";
            o.innerHTML="<div style='background:white;padding:30px;border-radius:20px;text-align:center'><p>ì¹´í†¡ ì „ì†¡ì„ ì™„ë£Œí•˜ì…¨ë‚˜ìš”?</p><button onclick='done()' style='width:100%;padding:10px;background:#fee500;border:none;border-radius:10px;font-weight:bold;'>ë„¤, ì™„ë£Œí–ˆìŠµë‹ˆë‹¤</button></div>";
        },1500);
    }
    function done() {
        document.getElementById("overlay").style.display="none";
        document.getElementById("kakaoBtn").style.display="none";
        document.getElementById("resArea").style.display="block";
        document.getElementById("resArea").innerHTML="<div style='padding:20px;background:#eeebff;border-radius:15px;text-align:center'><h3>ì±„ì  ì™„ë£Œ</h3><p>ì˜¤ë‹µ: "+w+"ê°œ</p><a href='"+CONFIG.ansLink+"' target='_blank' style='display:block;padding:10px;background:#6c5ce7;color:white;text-decoration:none;border-radius:10px;'>í•´ì„¤ì§€ ë³´ê¸°</a></div>";
    }
<\/script>
</body>
</html>`;
    
    document.getElementById('output').value = finalCode;
    document.getElementById('output').style.display = 'block';
    alert("ì½”ë“œê°€ í•˜ë‹¨ì— ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ì„¸ìš”!");
}
</script>
</body>
</html>