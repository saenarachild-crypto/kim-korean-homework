<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>êµ­ì–´ ê³¼ì œ ìƒì„±ê¸° v13.0</title>
    <style>
        :root { --p: #6c5ce7; --p-light: #a29bfe; --bg: #f9f9fb; }
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background: var(--bg); padding: 20px; color: #2d3436; }
        .box { max-width: 850px; margin: 0 auto; background: #fff; padding: 40px; border-radius: 25px; box-shadow: 0 20px 40px rgba(108, 92, 231, 0.1); border: 1px solid #eeebff; }
        h2 { color: var(--p); display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .info-badge { display: inline-block; background: #f0edff; color: var(--p); padding: 8px 15px; border-radius: 10px; font-size: 0.85rem; font-weight: bold; margin-bottom: 20px; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        label { display: block; margin-top: 10px; font-weight: bold; font-size: 0.9rem; color: #636e72; }
        input, textarea { width: 100%; padding: 14px; margin-top: 8px; border: 2px solid #edf2f7; border-radius: 12px; box-sizing: border-box; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--p-light); background: #fcfcff; }
        #genBtn { grid-column: span 2; padding: 20px; background: linear-gradient(135deg, var(--p), var(--p-light)); color: white; border: none; border-radius: 15px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 30px; box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3); }
        #output { grid-column: span 2; width: 100%; height: 250px; margin-top: 25px; font-family: 'Consolas', monospace; background: #2d3436; color: #dfe6e9; padding: 15px; border-radius: 12px; font-size: 11px; border: none; cursor: pointer; }
    </style>
</head>
<body>
<div class="box">
    <h2>ğŸ¯ êµ­ì–´ ê³¼ì œ ì‹œìŠ¤í…œ v13.0</h2>
    <div class="info-badge">âœ… JavaScript í‚¤ ì¸ì¦ ì™„ë£Œ: f81d5eae...</div>
    
    <div class="form-grid">
        <div><label>ê³¼ì œ íšŒì°¨ (ex. 1ì›” 3ì£¼ì°¨)</label><input type="text" id="weekTitle" value="1ì›” 3ì£¼ì°¨"></div>
        <div><label>ê³¼ì œ ëŒ€ì œëª© (ex. ì£¼ê°„ì§€ ê³ 2 ë¬¸í•™)</label><input type="text" id="mainTitle" value="ì£¼ê°„ì§€ ê³ 2 ë¬¸í•™"></div>
        <div style="grid-column:span 2;"><label>ì „ì²´ ì •ë‹µ (ìˆ«ìë§Œ ì—°ì† ì…ë ¥)</label><textarea id="answers" rows="3" placeholder="ì˜ˆ: 311454..."></textarea></div>
        <div><label>í™œì„±í™” ë²”ìœ„</label><input type="text" id="activeRange" placeholder="ì˜ˆ: 1-15"></div>
        <div><label>í•´ì„¤ì§€ ë§í¬</label><input type="text" id="ansLink" placeholder="https://..."></div>
        <button id="genBtn" onclick="generateCode()">ğŸ”® 4011 ì—ëŸ¬ ì˜êµ¬ í•´ê²° ì½”ë“œ ìƒì„±</button>
        <textarea id="output" readonly onclick="this.select(); document.execCommand('copy'); alert('ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');" placeholder="ì—¬ê¸°ì— ìƒì„±ëœ ì½”ë“œê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤."></textarea>
    </div>
</div>

<script>
// [ìµœì¢… ë°ì´í„°] ì„ ìƒë‹˜ì˜ ì „ìš© í‚¤ì™€ ì‹œíŠ¸ URL
const S_URL = "https://script.google.com/macros/s/AKfycbwtzD2n-5ksERWy2iqE1dB4g36RfWfpP0DhvutxJcYTOSZP8u-xvLHUNZcFgMNkjbF1/exec";
const K_KEY = "f81d5eae0eaaf6fa2d0bdccbe6916001"; // JavaScript í‚¤ ì¥ì°©
const DOMAIN = "https://saenarachild-crypto.github.io"; // ë“±ë¡ëœ ì›¹ ë„ë©”ì¸

function generateCode() {
    const week = document.getElementById('weekTitle').value;
    const title = document.getElementById('mainTitle').value;
    const ansArray = document.getElementById('answers').value.replace(/[^1-5]/g, '').split('').map(Number);
    const ansL = document.getElementById('ansLink').value || "#";

    let c = '<!DOCTYPE html>\n<html lang="ko">\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">\n';
    c += '<title>' + week + ' ê³¼ì œ</title>\n<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"><\/script>\n';
    c += '<style>\n:root{--p:#6c5ce7;--bg:#f8f9fc}body{font-family:-apple-system,sans-serif;background:var(--bg);padding:15px;margin:0}.container{max-width:500px;margin:0 auto;background:#fff;padding:30px;border-radius:30px;box-shadow:0 15px 35px rgba(0,0,0,0.05)}.q-card{border:1px solid #eee;border-radius:20px;padding:20px;margin-bottom:15px}.opt-label{flex:1;height:45px;border:1.5px solid #eee;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;cursor:pointer}.opt-input:checked+.opt-label{background:var(--p);color:#fff}.btn{width:100%;padding:18px;border-radius:15px;border:none;font-weight:bold;cursor:pointer;margin-top:15px;display:block;text-align:center;text-decoration:none}#overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:99;align-items:center;justify-content:center}\n</style></head><body><div id="overlay"></div><div class="container"><h2>' + title + '</h2>';
    c += '<input type="text" id="cN" placeholder="í•™ì›/ë°˜ (ì˜ˆ: í‰ì¼Aë°˜)" style="width:100%;padding:12px;border-radius:10px;border:1px solid #eee;margin-bottom:10px;box-sizing:border-box;">';
    c += '<input type="text" id="sN" placeholder="í•™ìƒ ì´ë¦„" style="width:100%;padding:12px;border-radius:10px;border:1px solid #eee;margin-bottom:20px;box-sizing:border-box;">';
    c += '<div id="qC"></div><button id="subBtn" class="btn" style="background:var(--p);color:#fff" onclick="submit()">ğŸ“ ë‹µì•ˆ ì œì¶œ ë° ê¸°ë¡</button><button id="kakaoBtn" class="btn" style="background:#fee500;color:#3c1e1e;display:none" onclick="share()">ğŸŸ¡ ì¹´í†¡ìœ¼ë¡œ ê²°ê³¼ ì „ì†¡</button><div id="resArea" style="display:none;margin-top:20px;text-align:center"></div></div>';
    
    c += '<script>\n';
    c += 'try{if(!Kakao.isInitialized())Kakao.init("' + K_KEY + '");}catch(e){}\n';
    c += 'const correct=[' + ansArray.join(',') + '], sUrl="' + S_URL + '", domain="' + DOMAIN + '"; let resT="", w=0;\n';
    c += 'window.addEventListener("load", function(){ let h=""; correct.forEach((_,i)=>{\n';
    c += '  h+=\'<div class="q-card"><div style="font-weight:bold;margin-bottom:10px">\'+(i+1)+\'ë²ˆ</div><div style="display:flex;gap:8px">\';\n';
    c += '  for(let j=1;j<=5;j++) h+=\'<input type="radio" name="q\'+(i+1)+\'" id="q\'+(i+1)+\'_\'+j+\'" value="\'+j+\'" style="display:none" class="opt-input"><label for="q\'+(i+1)+\'_\'+j+\'" class="opt-label">\'+j+\'</label>\';\n';
    c += '  h+=\'</div></div>\'; }); document.getElementById("qC").innerHTML=h; });\n';
    
    c += 'function submit(){\n';
    c += '  const cN=document.getElementById("cN").value, sN=document.getElementById("sN").value; if(!cN||!sN){alert("ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");return;}\n';
    c += '  w=0; let d=[]; correct.forEach((ans,i)=>{const sel=document.querySelector(\'input[name="q\'+(i+1)+\'"]:checked\'); if(!sel||parseInt(sel.value)!==ans){w++; d.push(i+1);}});\n';
    c += '  resT="[' + week + ']\\nì†Œì†: "+cN+"\\ní•™ìƒ: "+sN+"\\nì˜¤ë‹µ: "+w+"ê°œ\\në²ˆí˜¸: "+(d.join(", ")||"ì—†ìŒ");\n';
    c += '  fetch(sUrl,{method:"POST",mode:"no-cors",body:JSON.stringify({exam:"' + week + '",class:cN,name:sN,wrongCount:w,wrongList:d.join(",")})});\n';
    c += '  alert("ì œì¶œ ì™„ë£Œ! ì•„ë˜ ë…¸ë€ìƒ‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”."); document.getElementById("subBtn").style.display="none"; document.getElementById("kakaoBtn").style.display="block";\n}\n';
    
    c += 'function share(){\n';
    c += '  Kakao.Share.sendDefault({ objectType:"text", text:resT, link:{ mobileWebUrl:domain, webUrl:domain } });\n';
    c += '  setTimeout(function(){ document.getElementById("overlay").style.display="flex"; document.getElementById("overlay").innerHTML=\'<div style="background:#fff;padding:30px;border-radius:20px;text-align:center;width:80%"><p style="font-weight:bold">ì „ì†¡ì„ ì™„ë£Œí•˜ì…¨ë‚˜ìš”?</p><button onclick="done()" style="padding:15px;background:#fee500;border:none;border-radius:15px;font-weight:bold;width:100%">ë„¤, ì™„ë£Œí–ˆìŠµë‹ˆë‹¤</button></div>\'; }, 2000);\n}\n';
    
    c += 'function done(){\n';
    c += '  document.getElementById("overlay").style.display="none"; document.getElementById("kakaoBtn").style.display="none";\n';
    c += '  document.getElementById("resArea").style.display="block"; document.getElementById("resArea").innerHTML="<div style=\'padding:20px;background:#eeebff;border-radius:20px\'><h3>ğŸŠ ê³¼ì œ ì™„ë£Œ!</h3><div style=\'font-size:2rem;font-weight:bold\'>ì˜¤ë‹µ "+w+"ê°œ</div><br><a href=\'' + ansL + '\' target=\'_blank\' class=\'btn\' style=\'background:var(--p);color:#fff\'>ğŸ“˜ í•´ì„¤ì§€ ë³´ê¸°</a></div>";\n}\n';
    c += '<\/script></body></html>';
    
    document.getElementById('output').value = c;
}
</script>
</body>
</html>