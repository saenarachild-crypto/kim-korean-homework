<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 1ì›” 1íšŒì°¨ ë§ˆì¹¨ë‚´ ëª¨ì˜ê³ ì‚¬(ì–¸ë§¤)</title>
    <style>
        body{font-family:-apple-system,sans-serif;background:#f0f2f5;padding:15px;margin:0}
        .container{max-width:600px;margin:0 auto;background:#fff;padding:25px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
        .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #f0f0f0; padding-bottom: 15px; }
        .title { margin: 5px 0; color: #333; }
        .notice-box { background: #fff3e0; border: 1px solid #ffe0b2; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 0.95rem; line-height: 1.5; color: #5d4037; }
        .link-btn { display: block; width: 100%; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-weight: bold; margin-bottom: 10px; transition: 0.2s; box-sizing: border-box; }
        .btn-test { background: #607d8b; color: white; }
        .btn-ans { background: #4caf50; color: white; margin-top: 15px; }
        .q-item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; display: flex; align-items: center; justify-content: space-between; }
        .q-num { font-weight: bold; color: #2196f3; width: 40px; }
        .omr-group { display: flex; gap: 8px; flex: 1; justify-content: space-around; }
        .omr-input { display: none; }
        .omr-label { width: 35px; height: 35px; border-radius: 50%; border: 2px solid #ddd; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #999; cursor: pointer; transition: 0.2s; }
        .omr-input:checked + .omr-label { background: #2196f3; border-color: #2196f3; color: white; }
        .show-wrong .wrong-row .omr-input:checked + .omr-label { background: #ef5350; border-color: #ef5350; }
        .btn-submit { display: block; width: 100%; padding: 15px; background: #ff6b6b; color: white; border: none; border-radius: 10px; font-weight: bold; font-size: 1.1rem; cursor: pointer; margin-top:20px; }
        .result-box { display: none; margin-top: 25px; padding: 20px; border-radius: 10px; text-align: center; background: #e3f2fd; }
        .pass { background: #e8f5e9; border: 2px solid #4caf50; color: #2e7d32; }
        .fail { background: #ffebee; border: 2px solid #ef5350; color: #c62828; }
        input[type=text] { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h2 class="title">2026 1ì›” 1íšŒì°¨ ë§ˆì¹¨ë‚´ ëª¨ì˜ê³ ì‚¬(ì–¸ë§¤)</h2>
        <div style="font-size:0.9rem; color:#666">ì´ 45ë¬¸í•­ (í†µê³¼ê¸°ì¤€: 0ê°œ ì˜¤ë‹µ í—ˆìš©)</div>
    </div>
    
    <a href="https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQAcgGBwEWJyRq4ieky-YGYcAU6bdBdBVLLYIf6yBvC3wIM?e=HqkYsY" class="link-btn btn-test" target="_blank">ğŸ“„ ì‹œí—˜ì§€ ë³´ëŸ¬ê°€ê¸° (Click)</a>
    <div class="notice-box">ğŸ“¢ <b>ê³µì§€ì‚¬í•­</b><br>ìµœì¢…ë³¸ì…ë‹ˆë‹¤. ë‹µì„ ì…ë ¥í•˜ë©´ ë°”ë¡œ í‹€ë¦° ê°œìˆ˜ì™€ í•´ì„¤ì§€ê°€ ëœ¹ë‹ˆë‹¤.</div>

    <div style="margin-bottom:20px; background:#fafafa; padding:15px; border-radius:8px;">
        <label style="font-weight:bold; color:#d63031;">ğŸ« í•™ì› ì´ë¦„ (í•„ìˆ˜)</label>
        <input type="text" id="academySelect" placeholder="ì˜ˆ: ëŸ¬ì…€ë¶„ë‹¹, ì‹œëŒ€ì¸ì¬ (ì •í™•íˆ ì…ë ¥)">
        <label style="font-weight:bold; margin-top:10px; display:block;">ğŸ‘¤ í•™ìƒ ì´ë¦„</label>
        <input type="text" id="studentName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
    </div>

    <div id="questionContainer"></div>
    <button id="submitBtn" class="btn-submit" onclick="checkAnswers()">ğŸ“ ì œì¶œí•˜ê³  ì±„ì í•˜ê¸°</button>
    <div id="timerMsg" style="text-align:center; color:#d32f2f; margin-top:10px;"></div>
    <div id="resultArea" class="result-box"></div>
</div>

<script>
    // âœ… ì „ë‹¬ë°›ì€ ìƒˆë¡œìš´ êµ¬ê¸€ ì•±ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ URL ë°˜ì˜
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzsCbfDz3eq3nb3qkGm3X8zTBSJGF34UE93UbsSEcAVzDCzq4ZzDRikf39X-VfPkAc3/exec"; 
    const correctAnswers = [1, 4, 5, 5, 4, 4, 5, 5, 1, 1, 3, 2, 4, 2, 4, 2, 5, 3, 1, 5, 5, 1, 3, 3, 1, 3, 5, 5, 4, 3, 5, 3, 5, 4, 1, 2, 2, 4, 5, 5, 3, 2, 3, 3, 4];
    const passCriteria = 0;
    const COOLDOWN_MINUTES = 0;
    const MAX_ATTEMPTS = 2;
    const ANSWER_LINK = "https://goe2427-my.sharepoint.com/:b:/g/personal/pure173_jeonghyeonh_goe_go_kr/IQBzNHsCmCxESb00iwr6QXNAAUDdvFyChHWvJg-m8gEorzU?e=SRCjIK"; 
    const STORAGE_KEY = "daily_1768221335633";
    let attempt = 0; const totalQ = correctAnswers.length;

    window.onload = function() {
        let html = "";
        for(let i=1; i<=totalQ; i++) {
            html += '<div class="q-item" id="qRow'+i+'"><span class="q-num">'+i+'ë²ˆ</span><div class="omr-group">';
            for(let j=1; j<=5; j++) {
                html += '<input type="radio" name="q'+i+'" id="q'+i+'_'+j+'" value="'+j+'" class="omr-input"><label for="q'+i+'_'+j+'" class="omr-label">'+j+'</label>';
            }
            html += '</div></div>';
        }
        document.getElementById("questionContainer").innerHTML = html;
        loadStatus();
    };

    function loadStatus() {
        const saved = localStorage.getItem(STORAGE_KEY);
        if(saved) {
            const data = JSON.parse(saved);
            attempt = data.attempt || 0;
            if(data.name) document.getElementById("studentName").value = data.name;
            if(data.academy) document.getElementById("academySelect").value = data.academy;
            if(MAX_ATTEMPTS > 0 && attempt >= MAX_ATTEMPTS) { disableForever(); return; }
            if(COOLDOWN_MINUTES > 0 && data.lastSubmitTime) {
                const passed = (new Date().getTime() - data.lastSubmitTime)/1000/60;
                if(passed < COOLDOWN_MINUTES) lockSubmit(COOLDOWN_MINUTES - passed);
            }
        }
    }
    
    function checkAnswers() {
        const name = document.getElementById("studentName").value.trim();
        const academy = document.getElementById("academySelect").value.trim(); 
        if(!academy) return alert("í•™ì› ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        if(!name) return alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        for(let i=1; i<=totalQ; i++) if(!document.querySelector('input[name="q'+i+'"]:checked')) return alert(i + "ë²ˆ ë¬¸ì œë¥¼ ì•„ì§ ì•ˆ í’€ì—ˆìŠµë‹ˆë‹¤!");

        attempt++;
        let wrongCount = 0; let wrongList = [];
        const container = document.getElementById("questionContainer");
        container.classList.remove("show-wrong");

        for(let i=0; i<totalQ; i++) {
            const userVal = document.querySelector('input[name="q'+(i+1)+'"]:checked').value;
            const row = document.getElementById('qRow'+(i+1));
            row.classList.remove("wrong-row");
            if(parseInt(userVal) !== correctAnswers[i]) {
                wrongCount++; wrongList.push((i+1)+"ë²ˆ");
                row.classList.add("wrong-row");
            } 
        }
        localStorage.setItem(STORAGE_KEY, JSON.stringify({ name: name, academy: academy, attempt: attempt, lastSubmitTime: new Date().getTime() }));

        // âœ… êµ¬ê¸€ ì‹œíŠ¸ë¡œ ë°ì´í„° ì „ì†¡ (GET ë°©ì‹ í˜¸í™˜ ì•”í˜¸í™”)
        const sendData = {
            type: "daily_test",
            title: document.title,
            academy: academy,
            name: name,
            score: totalQ - wrongCount,
            total: totalQ,
            wrongCount: wrongCount,
            wrongList: wrongList.join(", ")
        };
        
        const payload = btoa(unescape(encodeURIComponent(JSON.stringify(sendData))));
        fetch(SCRIPT_URL + "?data=" + payload, { mode: 'no-cors' }).catch(e => console.log(e));

        const isPass = wrongCount <= passCriteria;
        const resultText = isPass ? "í†µê³¼! ğŸ‰" : "ì¬ì‹œí—˜ ğŸ˜±";
        const kakaoMsg = "[ì¼ì¼í…ŒìŠ¤íŠ¸ ê²°ê³¼ Report]\n\ní•™ì›: " + academy + "\ní•™ìƒ: " + name + "\ní‹€ë¦° ê°œìˆ˜: " + wrongCount + "ê°œ\nê²°ê³¼: " + resultText;
        if(/Android|iPhone|iPad/i.test(navigator.userAgent)) {
             location.href = "kakaotalk://send?text=" + encodeURIComponent(kakaoMsg);
        }

        const res = document.getElementById("resultArea"); res.style.display = "block";
        let showAnswerBtn = false; 

        if(isPass) {
            res.className = "result-box pass";
            res.innerHTML = "<h2>ğŸ‰ " + name + " í•™ìƒ í†µê³¼!</h2><p>ì—‘ì…€ ì €ì¥ ì™„ë£Œ + ì¹´í†¡ ì „ì†¡ ì™„ë£Œ!<br>ìˆ˜ê³ í–ˆìŠµë‹ˆë‹¤! ğŸ‘‹</p>";
            document.getElementById("submitBtn").style.display = "none";
            showAnswerBtn = true; 
        } else {
            let msg = "<div style='font-weight:bold;font-size:1.2rem'>ğŸ˜± " + wrongCount + "ê°œ í‹€ë ¸ì–´ìš”!</div>";
            const showDetail = (MAX_ATTEMPTS === 0) || (attempt >= MAX_ATTEMPTS - 1);
            if(showDetail) {
                container.classList.add("show-wrong"); 
                msg += "<div style='margin-top:10px; color:#d32f2f; background:#fff; padding:10px; border-radius:5px; border:1px solid #ef5350;'><b>ğŸ’¡ íŒíŠ¸ (ì˜¤ë‹µ ë¬¸í•­):</b><br>"+wrongList.join(", ")+"</div>";
            } else {
                msg += "<div style='margin-top:10px; color:#f57c00; background:#fff; padding:10px; border-radius:5px; border:1px solid #ffb74d;'><b>ğŸ”’ ì˜¤ë‹µ ë¹„ê³µê°œ</b><br>í‹€ë¦° ê°œìˆ˜ë§Œ í™•ì¸í•˜ê³  ë‹¤ì‹œ í’€ì–´ë³´ì„¸ìš”!</div>";
            }
            if(MAX_ATTEMPTS > 0) {
                if(MAX_ATTEMPTS - attempt <= 0) { 
                    disableForever(); 
                    msg += "<br><b style='color:red'>ğŸš« ê¸°íšŒ ì†Œì§„! (ìµœì¢… ì œì¶œ)</b>";
                    showAnswerBtn = true; 
                } else { 
                    msg += "<br>(ë‚¨ì€ ê¸°íšŒ: "+(MAX_ATTEMPTS-attempt)+"ë²ˆ)"; 
                    if(COOLDOWN_MINUTES > 0) lockSubmit(COOLDOWN_MINUTES); 
                }
            } else if(COOLDOWN_MINUTES > 0) lockSubmit(COOLDOWN_MINUTES);
            res.className = "result-box fail"; res.innerHTML = msg;
        }
        if(showAnswerBtn && ANSWER_LINK) {
            res.innerHTML += '<a href="' + ANSWER_LINK + '" class="link-btn btn-ans" target="_blank">ğŸ“˜ ì •ë‹µ ë° í•´ì„¤ ë‹¤ìš´ë¡œë“œ (Click)</a>';
        }
    }
    
    function lockSubmit(min) {
        const btn = document.getElementById("submitBtn"); const msg = document.getElementById("timerMsg");
        btn.disabled = true; msg.style.display = "block";
        let sec = Math.ceil(min * 60);
        const timer = setInterval(() => {
            sec--;
            if(sec <= 0) { clearInterval(timer); btn.disabled = false; btn.innerText = "ğŸ“ ì œì¶œí•˜ê³  ì±„ì í•˜ê¸°"; msg.style.display = "none"; }
            else { btn.innerText = "â³ ëŒ€ê¸° ("+Math.ceil(sec)+"ì´ˆ)"; msg.innerText = "â³ "+Math.ceil(sec)+"ì´ˆ í›„ ì¬ë„ì „ ê°€ëŠ¥"; }
        }, 1000);
    }
    function disableForever() { document.getElementById("submitBtn").disabled = true; document.getElementById("submitBtn").innerText = "ğŸš« ì œì¶œ ë¶ˆê°€"; }
</script>
</body>
</html>